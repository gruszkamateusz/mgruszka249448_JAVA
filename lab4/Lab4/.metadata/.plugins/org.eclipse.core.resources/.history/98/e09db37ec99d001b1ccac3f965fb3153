package processor;

import processing.Processor;
import processing.Status;
import processing.StatusListener;

public class ProcessorB implements Processor, Runnable {
    private String input;
    private String result;
    private StatusListener statusListener;

    @Override
    public boolean submitTask(String s, StatusListener statusListener) {
        this.statusListener = statusListener;
        input = s;
        result = "";
        Thread thread = new Thread(this);
        thread.start();
        return true;
    }

    @Override
    public String getInfo() {
        return "Info about processingB.LowerCaseProcessor";
    }

    @Override
    public String getResult() {
        return result;
    }

    @Override
    public void run() {
        int progressDivider = input.length() / 10;
        for(int i = 0; i < input.length(); ++i) {
            result += Character.toLowerCase(input.charAt(i));
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            if((i % progressDivider) == 0)
                statusListener.statusChanged(new Status("Upper case task", i * 100 / input.length()));
        }
        statusListener.statusChanged(new Status("Upper case task", 100));
    }
}
